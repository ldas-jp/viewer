(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1313:function(e,t,n){"use strict";n.r(t);n(16),n(23),n(64),n(1134),n(50),n(58),n(71),n(48),n(292),n(47);var r=n(9),o=n(1137),l=n.n(o);function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var d={layout:"default",components:{},data:function(){return{progress:0,total:0,start:0,end:0,manifest:null,message:"",loading:!1,text:"",size:"full"}},mounted:function(){this.manifest=this.$route.query.manifest,this.size=this.$route.query.size||this.size,this.manifest&&(this.text=this.manifest,this.downloadImages())},computed:{percentage:function(){return 0==this.total?0:this.progress/this.total*100}},methods:{downloadImages:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,label,r,o,l,f,d,m,canvas,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.init(!0,""),e.size||(e.size="full"),n=[],label=e.manifest,r=[],t.prev=5,o=e.manifest,t.next=9,e.$axios.$get(o);case 9:l=t.sent,f=l.sequences[0].canvases,d=c(f);try{for(d.s();!(m=d.n()).done;)canvas=m.value,n.push(canvas.images[0].resource["@id"].replace("/full/full/","/full/".concat(e.size,"/")))}catch(e){d.e(e)}finally{d.f()}label=l.label,e.total=n.length,i=0;case 16:if(!(i<n.length)){t.next=28;break}return e.progress=i,t.t0=r,t.t1=String(i+1).padStart(5,"0")+".jpg",t.next=22,e.$axios.$get(n[i],{responseType:"arraybuffer"});case 22:t.t2=t.sent,t.t3={fileName:t.t1,data:t.t2},t.t0.push.call(t.t0,t.t3);case 25:i++,t.next=16;break;case 28:t.next=34;break;case 30:return t.prev=30,t.t4=t.catch(5),e.init(!1,t.t4),t.abrupt("return");case 34:e.progress=e.total,e.generateImagesZip(r,label),e.init(!1,"");case 37:case"end":return t.stop()}}),t,null,[[5,30]])})))()},init:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.total=0,this.loading=e,this.message=t},generateImagesZip:function(e,label){var t=new l.a,n=label,r=t.folder(n);e.forEach((function(image){image.data&&image.fileName&&r.file(image.fileName,image.data)})),t.generateAsync({type:"blob"}).then((function(e){var t=document.createElement("a"),r=URL.createObjectURL(e);t.href=r,t.download="".concat(n,".zip"),document.body.insertAdjacentElement("beforeEnd",t),t.click(),t.remove(),setTimeout((function(){window.URL.revokeObjectURL(r)}),1e3)}))}}},m=n(72),v=n(117),h=n.n(v),y=n(272),x=n(883),w=n(439),_=n(542),I=n(884),$=n(1302),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{staticClass:"my-5"},[n("h2",{staticClass:"mb-5"},[e._v(e._s(e.$t("IIIF Image Downloader"))+" (JavaScript "+e._s(e.$t("Version"))+")")]),e._v(" "),n("v-text-field",{attrs:{filled:"",rounded:"",label:e.$t("IIIF Manifest"),placeholder:"{scheme}://{host}/{prefix}/{identifier}/manifest"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{filled:"",rounded:"",label:e.$t("Size"),placeholder:"full, '600,', ',600', ..."},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{filled:"",rounded:"",disabled:"",label:e.$t("Start")},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{filled:"",rounded:"",disabled:"",label:e.$t("End")},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}})],1)],1),e._v(" "),n("v-btn",{attrs:{rounded:"",loading:e.loading,color:"primary"},on:{click:function(t){e.manifest=e.text,e.downloadImages()}}},[e._v(e._s(e.$t("Download")))]),e._v(" "),n("h2",{staticClass:"mt-10 mb-5"}),e._v(" "),n("div",{staticClass:"error--text"},[e._v(e._s(e.message))]),e._v(" "),0!==e.total?n("v-progress-linear",{attrs:{color:"amber",height:"25"},model:{value:e.percentage,callback:function(t){e.percentage=t},expression:"percentage"}},[n("strong",[e._v(e._s(e.progress)+" / "+e._s(e.total))])]):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;h()(component,{VBtn:y.a,VCol:x.a,VContainer:w.a,VProgressLinear:_.a,VRow:I.a,VTextField:$.a})}}]);